# Lab 5

In this lab you will build an app that displays a scrolling list of
UNB courses (including course numbers, titles and credit
hours). Selecting a course will provide a description of that
course. The app will use the Master/Detail Flow pattern and fragments
to present a different UI on phones and tablets. On a phone, viewing
the scrolling list of courses, and viewing a course description, will
be achieved with two separate activities. On a wide enough device
(i.e., a tablet in landscape mode) the scrolling list of courses will
be on the left side, and the course descriptions will be on the
right. We will use a ```RecyclerView``` to present a scrolling list.

Import the Lab 4 skeleton project. This skeleton is a Master/Detail
Flow template (automatically generated by AndroidStudio) with an
additional two class files representing a data model for the courses
and their descriptions. Some of the ```.java``` files contain
additional ```TODO``` items, which you will be completing later in the
lab.


## Understanding the skeleton code

Inside the Java resource directory notice the ```dummy```
subdirectory. Accessing the ```DummyContent``` class will reveal a
demonstration of how the Master/Detail Flow template creates items. If
you scroll to the bottom of this class you'll see there is a public
static class that represents a ```DummyItem```.

We will be similarly providing content in this manner, but we're using
a ```Course``` item and separating our data processing concerns into a
separate class called ```DataModel```. You can find out what a
```Course``` item contains inside the ```Course``` Java resource
file. The ```DataModel``` class accesses a ```JSON``` asset file
included in the project (in ```res/assets/CS.json```). This ```JSON```
file contains information about Computer Science courses available at
UNB. The ```DataModel``` class processes the ```JSON``` to create
individual ```Course``` items.

Your job will be to get an instance of this ```DataModel``` and wire
```Course``` items to the ```RecyclerView``` (in
```CourseListActivity.java```) for use in this template. On a tablet
```Course``` name and ID will be presented in a scrolling
```RecyclerView``` component down the left side, with the ```Course```
description accompanying the currently selected course appearing on
the right. On a phone, these presentations will be achieved with two
separate activities. That is the flexibility afforded by Master/Detail
Flow.

The Master/Detail Flow pattern employs multiple default layout files
to make the UI adapt to different screen sizes and orientations

* activity_course_detail.xml
* activity_course_list.xml
* course_detail.xml
* course_list.xml
  * course_list.xml
  * course_list.xml (w900dp)
* course_list_content.xml


The best way to get your bearings in an existing project file is to
navigate to the ```AndroidManifest.xml``` and determine which
```Activity``` (represented by your Java source code files) contains
the ```<intent-filter>``` signifying itâ€™s the ```MAIN```
```Activity```. This ```Activity``` will be identified by the
```android:name``` field. You can navigate to this Java file and see
which layout file it instantiates using ```setContentView()```; this
will be the first screen users are presented with when this
application is run. Navigate to the layout file being utilized by
```setContentView()``` in your ```MAIN``` ```Activity```.

Take a look at this and other layout files in both the Text and Design
editors. Recall that fragments must be hosted by an ```Activity```;
here, those ```Activity``` layouts are represented by
```activity_course_detail.xml``` and
```activity_course_list.xml```. Investigating
```activity_course_list.xml``` we can see it contains a
```FrameLayout``` that includes the layout
```course_list.xml```. Given there are two ```course_list.xml```
files, the Android operating system must decide which layout to
present. It does this based on screen size (which can be affected by
orientation). Here, the layout file containing ```w900dp``` will be
the one used for tablets in landscape mode, allowing both course list
and the details of the selected course to be displayed simultaneously
side-by-side. The layout file without a screen size modifier is the
one that will be used for phones.

Take a look at the phone ```course_list.xml``` layout. Inside it we
see a single UI element, a ```RecyclerView``` (a flexible view for
providing a limited window into a large data set). The
```RecyclerView``` will be used as a scrolling list of available
courses that, once selected, will present a detailed description about
that particular course.

Going back to the ```CourseListActivity``` Java file we'll now explore
how how fragments get managed based on what screen size we are running
on. Notice that ```CourseListActivity``` has a private boolean
variable ```mTwoPane```. This member variable represents whether we
are running on a screen size appropriate for displaying both the
course list and course details simultaneously. If this variable is not
```true```, we assume we are running on a smaller screen device such
as a phone and the Android OS will deliver the layout necessary to fit
that screen size. If the variable is ```true``` the Android OS will
deliver the layout details necessary to put that user experience into
effect.

The ```CourseListActivity``` class ```onCreate()``` method will
instantiate the ```MAIN``` ```Activity```, provide it the described
layout in ```setContentView()```, and handle managing ```Fragment```
attachments. Because we are designing our application for a positive
user experience on both phone and tablet, there are some important
details regarding how this is accomplished. First, notice we
instantiate a ```FragmentManager```. This manager will control which
fragments are active in the application based on the logic we provide
(in this case, the logic implemented by the Master/Flow Detail
template).

This template checks if the ```course_detail_container```, which is
a ```NestedScrollView``` UI element in the
```activity_course_detail.xml```, is ```null```. If the
```course_detail_container``` is ```null```, we are in single pane
layout (i.e., a phone or tablet in portrait mode); if the
```course_detail_container``` is not ```null```, we are in a dual pane
layout (i.e., a tablet in landscape mode) utilizing fragments.

Now open the ```DataModel``` class. Note the member variables for this
class include a ```Context``` which is taken in as a parameter in the
constructor. Why does this class require a ```Context```? Note that in
the ```processJSON``` method we are parsing the JSON to create
```Course``` objects to populate the ```coursesArray``` member
variable. Under the ```/assets/``` project folder, investigate the
structure of the JSON from which the data is being pulled. Each
```Course``` object is built using these details.

## Implementation

Now that you have an understanding of how the skeleton code works,
modify the skeleton to display course information by completing the
following TODOs:

**1.** Complete TODO 1 through 8 in ```CourseListActivity```

**2.** Complete TODO 9 through 11 in ```CourseDetailFragment```

#### Deliverable

Show your working app to the instructor or TA.
